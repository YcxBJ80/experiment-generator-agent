<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰‹åŠ¨æµ‹è¯•åˆ é™¤åŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .code-block {
            background-color: #1e1e1e;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid #555;
        }
        button {
            background-color: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #005a9e;
        }
        .result {
            background-color: #0a3d0a;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #00ff00;
        }
        .error {
            background-color: #3d0a0a;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #ff0000;
        }
        .instruction {
            background-color: #3d3d0a;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #ffff00;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª åˆ é™¤åŠŸèƒ½æ‰‹åŠ¨æµ‹è¯•</h1>
    
    <div class="instruction">
        <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤ï¼š</h3>
        <ol>
            <li>æ‰“å¼€åº”ç”¨é¡µé¢ (http://localhost:5173/)</li>
            <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)</li>
            <li>å¤åˆ¶ä¸‹é¢çš„æµ‹è¯•ä»£ç åˆ°æ§åˆ¶å°è¿è¡Œ</li>
            <li>è§‚å¯Ÿè¾“å‡ºç»“æœ</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ” æ­¥éª¤1: åŸºç¡€æ£€æŸ¥ä»£ç </h2>
        <p>å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°åº”ç”¨é¡µé¢çš„æ§åˆ¶å°ï¼š</p>
        <div class="code-block">
console.log('ğŸš€ å¼€å§‹åˆ é™¤åŠŸèƒ½æµ‹è¯•...');

// æ£€æŸ¥é¡µé¢åŸºæœ¬ä¿¡æ¯
console.log('ğŸ“„ å½“å‰é¡µé¢:', window.location.href);
console.log('ğŸ“„ é¡µé¢æ ‡é¢˜:', document.title);

// æŸ¥æ‰¾æ‰€æœ‰æŒ‰é’®
const allButtons = document.querySelectorAll('button');
console.log('ğŸ“Š é¡µé¢æ€»æŒ‰é’®æ•°é‡:', allButtons.length);

// æŸ¥æ‰¾åˆ é™¤æŒ‰é’®ï¼ˆåŒ…å«SVGçš„æŒ‰é’®ï¼‰
let deleteButtons = [];
allButtons.forEach((btn, index) => {
    const hasSvg = btn.querySelector('svg') !== null;
    const hasTrashIcon = btn.innerHTML.includes('Trash');
    const className = btn.className || '';
    
    if (hasSvg || hasTrashIcon || className.includes('delete')) {
        deleteButtons.push({
            index,
            element: btn,
            innerHTML: btn.innerHTML.substring(0, 100),
            className: btn.className,
            title: btn.title || btn.getAttribute('aria-label') || ''
        });
    }
});

console.log('ğŸ—‘ï¸ æ‰¾åˆ°çš„åˆ é™¤æŒ‰é’®æ•°é‡:', deleteButtons.length);
deleteButtons.forEach((btn, i) => {
    console.log(`åˆ é™¤æŒ‰é’® ${i}:`);
    console.log('  HTML:', btn.innerHTML);
    console.log('  Class:', btn.className);
    console.log('  Title:', btn.title);
});

// æŸ¥æ‰¾å¯¹è¯æ–‡æœ¬
const allDivs = document.querySelectorAll('div');
let conversationDivs = [];
allDivs.forEach((div, index) => {
    const text = div.textContent || '';
    if (text.includes('æµ‹è¯•å¯¹è¯') || text.includes('New Conversation') || text.includes('ä¹™é…°æ°´æ¨é…¸')) {
        conversationDivs.push({
            index,
            text: text.substring(0, 50)
        });
    }
});

console.log('ğŸ’¬ æ‰¾åˆ°çš„å¯¹è¯æ–‡æœ¬æ•°é‡:', conversationDivs.length);
conversationDivs.forEach((item, i) => {
    console.log(`å¯¹è¯ ${i}:`, item.text);
});

console.log('\nğŸ“Š æ£€æŸ¥ç»“æœæ€»ç»“:');
console.log(`- åˆ é™¤æŒ‰é’®: ${deleteButtons.length} ä¸ª`);
console.log(`- å¯¹è¯æ–‡æœ¬: ${conversationDivs.length} ä¸ª`);

if (deleteButtons.length === 0) {
    console.log('âŒ é—®é¢˜ï¼šæ²¡æœ‰æ‰¾åˆ°åˆ é™¤æŒ‰é’®ï¼');
} else if (conversationDivs.length === 0) {
    console.log('âŒ é—®é¢˜ï¼šæ²¡æœ‰æ‰¾åˆ°å¯¹è¯æ•°æ®ï¼');
} else {
    console.log('âœ… é¡µé¢çœ‹èµ·æ¥æ­£å¸¸ï¼Œå¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥æµ‹è¯•');
}
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ æ­¥éª¤2: è®¾ç½®ç›‘æ§ä»£ç </h2>
        <p>å¦‚æœæ­¥éª¤1æ˜¾ç¤ºæœ‰åˆ é™¤æŒ‰é’®å’Œå¯¹è¯æ•°æ®ï¼Œè¿è¡Œä»¥ä¸‹ä»£ç è®¾ç½®ç›‘æ§ï¼š</p>
        <div class="code-block">
// è®¾ç½®confirmå‡½æ•°ç›‘æ§
if (!window.confirm._monitored) {
    const originalConfirm = window.confirm;
    window.confirm = function(message) {
        console.log('ğŸ”” ===== CONFIRMè¢«è°ƒç”¨! =====');
        console.log('ğŸ“ æ¶ˆæ¯å†…å®¹:', message);
        console.log('ğŸ“ è°ƒç”¨æ—¶é—´:', new Date().toLocaleTimeString());
        console.log('ğŸ“ è°ƒç”¨å †æ ˆ:');
        console.trace();
        
        const result = originalConfirm.call(this, message);
        
        console.log('âœ… ç”¨æˆ·é€‰æ‹©:', result ? 'ç¡®è®¤' : 'å–æ¶ˆ');
        console.log('ğŸ”” ===== CONFIRMè°ƒç”¨ç»“æŸ =====');
        
        return result;
    };
    window.confirm._monitored = true;
    console.log('âœ… confirmå‡½æ•°ç›‘æ§å·²è®¾ç½®');
} else {
    console.log('âš ï¸ confirmå‡½æ•°å·²ç»è¢«ç›‘æ§');
}

// è®¾ç½®ç½‘ç»œè¯·æ±‚ç›‘æ§
if (!window.fetch._monitored) {
    const originalFetch = window.fetch;
    window.fetch = function(...args) {
        const url = args[0];
        const options = args[1] || {};
        
        console.log('ğŸŒ ç½‘ç»œè¯·æ±‚:', options.method || 'GET', url);
        
        return originalFetch.apply(this, args)
            .then(response => {
                console.log('ğŸ“¥ ç½‘ç»œå“åº”:', response.status, url);
                return response;
            })
            .catch(error => {
                console.log('âŒ ç½‘ç»œé”™è¯¯:', error.message, url);
                throw error;
            });
    };
    window.fetch._monitored = true;
    console.log('âœ… ç½‘ç»œè¯·æ±‚ç›‘æ§å·²è®¾ç½®');
} else {
    console.log('âš ï¸ ç½‘ç»œè¯·æ±‚å·²ç»è¢«ç›‘æ§');
}

console.log('ğŸ¯ ç›‘æ§è®¾ç½®å®Œæˆï¼ç°åœ¨å¯ä»¥æ‰‹åŠ¨ç‚¹å‡»åˆ é™¤æŒ‰é’®æµ‹è¯•');
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ æ­¥éª¤3: æ‰‹åŠ¨æµ‹è¯•</h2>
        <div class="instruction">
            <p><strong>ç°åœ¨è¯·æ‰‹åŠ¨æ“ä½œï¼š</strong></p>
            <ol>
                <li>åœ¨åº”ç”¨é¡µé¢ä¸­æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå¯¹è¯é¡¹</li>
                <li>ç‚¹å‡»è¯¥å¯¹è¯é¡¹å³ä¾§çš„åˆ é™¤æŒ‰é’®ï¼ˆåƒåœ¾æ¡¶å›¾æ ‡ï¼‰</li>
                <li>è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</li>
                <li>æ£€æŸ¥æ˜¯å¦å‡ºç°ç¡®è®¤å¯¹è¯æ¡†</li>
            </ol>
        </div>
        
        <h3>ğŸ” é¢„æœŸç»“æœï¼š</h3>
        <ul>
            <li>âœ… æ§åˆ¶å°åº”è¯¥æ˜¾ç¤º "ğŸ”” ===== CONFIRMè¢«è°ƒç”¨! =====" </li>
            <li>âœ… æµè§ˆå™¨åº”è¯¥å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†</li>
            <li>âœ… å¦‚æœç‚¹å‡»ç¡®è®¤ï¼Œåº”è¯¥çœ‹åˆ°ç½‘ç»œè¯·æ±‚å’Œåˆ é™¤æ“ä½œ</li>
        </ul>
        
        <h3>âŒ å¦‚æœæ²¡æœ‰çœ‹åˆ°é¢„æœŸç»“æœï¼š</h3>
        <ul>
            <li>ç¡®è®¤å¯¹è¯æ¡†æ²¡æœ‰å¼¹å‡º â†’ confirmå‡½æ•°å¯èƒ½è¢«è¦†ç›–æˆ–é˜»æ­¢</li>
            <li>æ²¡æœ‰æ§åˆ¶å°è¾“å‡º â†’ åˆ é™¤æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¯èƒ½æ²¡æœ‰æ­£ç¡®ç»‘å®š</li>
            <li>æœ‰è¾“å‡ºä½†æ²¡æœ‰ç¡®è®¤æ¡† â†’ confirmå‡½æ•°è¢«å…¶ä»–ä»£ç æ‹¦æˆª</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ æ­¥éª¤4: è‡ªåŠ¨æµ‹è¯•ä»£ç ï¼ˆå¯é€‰ï¼‰</h2>
        <p>å¦‚æœæ‰‹åŠ¨æµ‹è¯•æœ‰é—®é¢˜ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹è‡ªåŠ¨æµ‹è¯•ä»£ç ï¼š</p>
        <div class="code-block">
// è‡ªåŠ¨æµ‹è¯•åˆ é™¤æŒ‰é’®
function autoTestDelete() {
    console.log('ğŸ¤– å¼€å§‹è‡ªåŠ¨æµ‹è¯•åˆ é™¤åŠŸèƒ½...');
    
    // é‡æ–°æŸ¥æ‰¾åˆ é™¤æŒ‰é’®
    const allButtons = document.querySelectorAll('button');
    let deleteButtons = [];
    
    allButtons.forEach((btn, index) => {
        const hasSvg = btn.querySelector('svg') !== null;
        const hasTrashIcon = btn.innerHTML.includes('Trash');
        
        if (hasSvg || hasTrashIcon) {
            deleteButtons.push(btn);
        }
    });
    
    if (deleteButtons.length > 0) {
        console.log('ğŸ¯ æ‰¾åˆ°åˆ é™¤æŒ‰é’®ï¼Œå‡†å¤‡æ¨¡æ‹Ÿç‚¹å‡»...');
        const button = deleteButtons[0];
        
        // åˆ›å»ºå¹¶è§¦å‘ç‚¹å‡»äº‹ä»¶
        const clickEvent = new MouseEvent('click', {
            bubbles: true,
            cancelable: true,
            view: window,
            detail: 1
        });
        
        console.log('âš¡ è§¦å‘ç‚¹å‡»äº‹ä»¶...');
        button.dispatchEvent(clickEvent);
        
        // ç­‰å¾…ä¸€ä¸‹æ£€æŸ¥ç»“æœ
        setTimeout(() => {
            console.log('â° ç‚¹å‡»å1ç§’æ£€æŸ¥ - å¦‚æœæ²¡æœ‰çœ‹åˆ°confirmè°ƒç”¨ï¼Œè¯´æ˜å­˜åœ¨é—®é¢˜');
        }, 1000);
        
    } else {
        console.log('âŒ æ²¡æœ‰æ‰¾åˆ°åˆ é™¤æŒ‰é’®ï¼Œæ— æ³•è¿›è¡Œè‡ªåŠ¨æµ‹è¯•');
    }
}

// è¿è¡Œè‡ªåŠ¨æµ‹è¯•
autoTestDelete();
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ æµ‹è¯•ç»“æœè®°å½•</h2>
        <p>è¯·æ ¹æ®æµ‹è¯•ç»“æœå¡«å†™ï¼š</p>
        <ul>
            <li>â–¡ æ‰¾åˆ°äº†åˆ é™¤æŒ‰é’®</li>
            <li>â–¡ æ‰¾åˆ°äº†å¯¹è¯æ•°æ®</li>
            <li>â–¡ ç‚¹å‡»åˆ é™¤æŒ‰é’®æœ‰ååº”</li>
            <li>â–¡ å‡ºç°äº†ç¡®è®¤å¯¹è¯æ¡†</li>
            <li>â–¡ confirmå‡½æ•°è¢«æ­£ç¡®è°ƒç”¨</li>
            <li>â–¡ åˆ é™¤æ“ä½œæ­£å¸¸æ‰§è¡Œ</li>
        </ul>
    </div>

</body>
</html>