# 管理后台说明

## 📍 位置

管理后台是一个完全独立的应用，位于 `Admin/` 目录中。

## ✨ 功能特性

### 数据可视化
- ✅ 用户统计（总用户数、总消息数、平均消息数）
- ✅ 用户消息数量柱状图（Top 10）
- ✅ 用户访问类型分布饼图
- ✅ 完整的用户详情表格，包含：
  - 用户名
  - 邮箱
  - 消息数量
  - 最后活跃时间
  - 注册时间
  - 访问类型标签

### 用户管理
- ✅ 用户列表展示
- ✅ 访问类型分配（软件/API/未分配）
- ✅ 搜索功能（按用户名或邮箱）
- ✅ 过滤功能（按访问类型）
- ✅ 一键更新用户访问类型
- ✅ 实时统计更新

## 🚀 快速开始

```bash
cd Admin
./setup.sh    # 自动安装依赖和设置
# 或者手动执行:
# npm install
# cp .env.example .env.local
# 编辑 .env.local 填入 Supabase 配置
npm run dev   # 访问 http://localhost:5174
```

## 📚 文档

- **QUICKSTART.md** - 5分钟快速启动指南
- **ADMIN_GUIDE.md** - 完整使用指南
- **README.md** - 技术文档和API说明

## 🗄️ 数据库变更

新增迁移文件: `supabase/migrations/20251029000000_add_access_type_to_user_profiles.sql`

在 `user_profiles` 表中添加了 `access_type` 字段，用于标记用户访问类型：
- `software`: 通过软件客户端访问
- `api`: 直接使用API访问
- `null`: 未分配

## 🎨 技术栈

- **React 18** + TypeScript
- **Vite 5** - 快速开发构建
- **Tailwind CSS** - 现代化样式
- **Recharts** - 数据可视化
- **Supabase** - 数据库和后端

## 🔒 安全性

- 使用独立的环境变量配置（`.env.local`）
- 支持 Supabase Service Role Key（完整数据库权限）
- 不影响主应用的任何代码
- 完全分离的依赖管理

## 📦 独立性

管理后台与主应用**完全独立**：
- ✅ 独立的 `package.json`
- ✅ 独立的依赖
- ✅ 独立的端口（5174）
- ✅ 独立的构建配置
- ✅ 不影响主应用的任何文件

## 🎯 使用场景

1. **用户数据分析**: 查看用户活跃度和使用情况
2. **访问权限管理**: 为用户分配软件或API访问权限
3. **用户筛选**: 快速找到特定类型的用户
4. **数据导出**: 查看详细的用户信息表格

## 🔧 开发命令

```bash
cd Admin

# 开发
npm run dev       # 启动开发服务器 (http://localhost:5174)

# 构建
npm run build     # 构建生产版本到 dist/

# 预览
npm run preview   # 预览生产版本

# 检查
npm run lint      # 代码检查
```

## 📸 界面截图

管理后台采用深色主题设计，适合长时间使用：

- **导航栏**: 顶部固定导航，包含"数据仪表板"和"用户管理"两个页面
- **数据仪表板**: 显示统计卡片、图表和用户详情表格
- **用户管理**: 提供搜索、过滤和批量操作功能

## 💡 注意事项

1. 首次使用需要运行数据库迁移添加 `access_type` 字段
2. 建议使用 Service Role Key 以获得完整的数据库访问权限
3. 管理后台应部署在受保护的环境中
4. 定期备份数据库

## 🐛 问题排查

如遇到问题，请查看:
1. 浏览器控制台的错误信息
2. `Admin/QUICKSTART.md` 中的常见问题部分
3. 确认 Supabase 配置正确
4. 检查数据库迁移是否已执行

## 📞 支持

有任何问题或建议，请:
- 查看详细文档 (`Admin/` 目录中的 Markdown 文件)
- 检查浏览器控制台日志
- 联系开发团队

---

**提示**: 这是一个纯管理后台应用，不包含用户身份验证。如需部署到生产环境，建议添加管理员认证机制。

