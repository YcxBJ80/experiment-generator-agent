<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ é™¤åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px;
        }
        .button:hover {
            background: #c82333;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <h1>åˆ é™¤åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•1: åŸºæœ¬ç¡®è®¤å¯¹è¯æ¡†</h2>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æµ‹è¯•confirmå¯¹è¯æ¡†æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p>
        <button class="button" onclick="testBasicConfirm()">æµ‹è¯•åŸºæœ¬ç¡®è®¤å¯¹è¯æ¡†</button>
        <div id="basic-result" class="log"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•2: æ¨¡æ‹Ÿåˆ é™¤ä¼šè¯åŠŸèƒ½</h2>
        <p>æ¨¡æ‹Ÿå®é™…çš„åˆ é™¤ä¼šè¯æµç¨‹ï¼š</p>
        <button class="button" onclick="testDeleteConversation()">æ¨¡æ‹Ÿåˆ é™¤ä¼šè¯</button>
        <div id="delete-result" class="log"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•3: æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§</h2>
        <p>æ£€æŸ¥å½“å‰æµè§ˆå™¨å¯¹confirmçš„æ”¯æŒï¼š</p>
        <button class="button" onclick="checkBrowserSupport()">æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ</button>
        <div id="browser-result" class="log"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•4: äº‹ä»¶ä¼ æ’­æµ‹è¯•</h2>
        <p>æµ‹è¯•äº‹ä»¶ä¼ æ’­æ˜¯å¦å½±å“ç¡®è®¤å¯¹è¯æ¡†ï¼š</p>
        <div onclick="parentClick()" style="padding: 20px; background: #e9ecef; cursor: pointer;">
            çˆ¶å…ƒç´  (ç‚¹å‡»ä¼šè§¦å‘)
            <button class="button" onclick="testEventPropagation(event)">å­æŒ‰é’® (åº”è¯¥é˜»æ­¢ä¼ æ’­)</button>
        </div>
        <div id="event-result" class="log"></div>
    </div>

    <script>
        function log(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            element.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
        }

        function testBasicConfirm() {
            const resultDiv = document.getElementById('basic-result');
            resultDiv.innerHTML = '';
            
            log('basic-result', 'å¼€å§‹æµ‹è¯•åŸºæœ¬ç¡®è®¤å¯¹è¯æ¡†...');
            
            try {
                const result = confirm('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¡®è®¤å¯¹è¯æ¡†ã€‚ç‚¹å‡»ç¡®å®šæˆ–å–æ¶ˆã€‚');
                log('basic-result', `ç”¨æˆ·é€‰æ‹©: ${result ? 'ç¡®å®š' : 'å–æ¶ˆ'}`, result ? 'success' : 'error');
            } catch (error) {
                log('basic-result', `é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testDeleteConversation() {
            const resultDiv = document.getElementById('delete-result');
            resultDiv.innerHTML = '';
            
            log('delete-result', 'ğŸ—‘ï¸ æ¨¡æ‹Ÿåˆ é™¤æŒ‰é’®è¢«ç‚¹å‡»...');
            
            try {
                const userConfirmed = confirm('Are you sure you want to delete this conversation? This action cannot be undone.');
                log('delete-result', `ğŸ‘¤ ç”¨æˆ·ç¡®è®¤ç»“æœ: ${userConfirmed}`, userConfirmed ? 'success' : 'error');
                
                if (!userConfirmed) {
                    log('delete-result', 'âŒ ç”¨æˆ·å–æ¶ˆåˆ é™¤');
                    return;
                }
                
                log('delete-result', 'âœ… ç”¨æˆ·ç¡®è®¤åˆ é™¤ï¼Œå¼€å§‹æ‰§è¡Œåˆ é™¤æ“ä½œ...', 'success');
                log('delete-result', 'æ¨¡æ‹ŸAPIè°ƒç”¨æˆåŠŸ', 'success');
                log('delete-result', 'åˆ é™¤åŠŸèƒ½æµ‹è¯•å®Œæˆ', 'success');
                
            } catch (error) {
                log('delete-result', `é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function checkBrowserSupport() {
            const resultDiv = document.getElementById('browser-result');
            resultDiv.innerHTML = '';
            
            log('browser-result', 'æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ...');
            
            // æ£€æŸ¥confirmå‡½æ•°
            if (typeof window.confirm === 'function') {
                log('browser-result', 'âœ… window.confirm å‡½æ•°å­˜åœ¨', 'success');
            } else {
                log('browser-result', 'âŒ window.confirm å‡½æ•°ä¸å­˜åœ¨', 'error');
            }
            
            // æ£€æŸ¥æµè§ˆå™¨ä¿¡æ¯
            log('browser-result', `æµè§ˆå™¨: ${navigator.userAgent}`);
            log('browser-result', `å¹³å°: ${navigator.platform}`);
            
            // æµ‹è¯•confirmæ˜¯å¦è¢«é‡å†™
            const originalConfirm = window.confirm;
            log('browser-result', `confirmå‡½æ•°ç±»å‹: ${typeof originalConfirm}`);
            log('browser-result', `confirmå‡½æ•°å­—ç¬¦ä¸²: ${originalConfirm.toString().substring(0, 100)}...`);
        }

        function parentClick() {
            log('event-result', 'çˆ¶å…ƒç´ è¢«ç‚¹å‡»');
        }

        function testEventPropagation(event) {
            const resultDiv = document.getElementById('event-result');
            if (resultDiv.innerHTML === '') {
                log('event-result', 'æµ‹è¯•äº‹ä»¶ä¼ æ’­...');
            }
            
            log('event-result', 'å­æŒ‰é’®è¢«ç‚¹å‡»');
            
            // é˜»æ­¢äº‹ä»¶ä¼ æ’­
            event.stopPropagation();
            log('event-result', 'è°ƒç”¨äº† event.stopPropagation()');
            
            // æµ‹è¯•ç¡®è®¤å¯¹è¯æ¡†
            const result = confirm('æµ‹è¯•äº‹ä»¶ä¼ æ’­ä¸­çš„ç¡®è®¤å¯¹è¯æ¡†');
            log('event-result', `ç¡®è®¤ç»“æœ: ${result}`, result ? 'success' : 'error');
        }
    </script>
</body>
</html>